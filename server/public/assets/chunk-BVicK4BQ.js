import{c as k,r as l,j as e,a,F as q,i as de,k as me,m as ue,n as P}from"./index-DKY7qEH5.js";import{c as he,I as G,B as T}from"./chunk-UgFRKLyd.js";import{c as b,a as K}from"./chunk-BoNpf983.js";import{a as _}from"./chunk-D8rVyQy1.js";import{U as O}from"./chunk-D56zueWU.js";import"./chunk-Crj-qy2Q.js";const ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],X=k("CircleAlert",ge);const pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fe=k("CircleCheck",pe);const be=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ne=k("Clock",be);const ye=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ve=k("Lock",ye);const xe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],we=k("TriangleAlert",xe),C=l.forwardRef(({className:t,...s},n)=>e("div",{ref:n,className:b("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));C.displayName="Card";const L=l.forwardRef(({className:t,...s},n)=>e("div",{ref:n,className:b("flex flex-col space-y-1.5 p-6",t),...s}));L.displayName="CardHeader";const Q=l.forwardRef(({className:t,...s},n)=>e("div",{ref:n,className:b("text-2xl font-semibold leading-none tracking-tight",t),...s}));Q.displayName="CardTitle";const H=l.forwardRef(({className:t,...s},n)=>e("div",{ref:n,className:b("text-sm text-muted-foreground",t),...s}));H.displayName="CardDescription";const I=l.forwardRef(({className:t,...s},n)=>e("div",{ref:n,className:b("p-6 pt-0",t),...s}));I.displayName="CardContent";const V=l.forwardRef(({className:t,...s},n)=>e("div",{ref:n,className:b("flex items-center p-6 pt-0",t),...s}));V.displayName="CardFooter";var Se=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Te=Se.reduce((t,s)=>{const n=he(`Primitive.${s}`),r=l.forwardRef((c,u)=>{const{asChild:i,...h}=c,g=i?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e(g,{...h,ref:u})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),ke="Label",Z=l.forwardRef((t,s)=>e(Te.label,{...t,ref:s,onMouseDown:n=>{var c;n.target.closest("button, input, select, textarea")||((c=t.onMouseDown)==null||c.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Z.displayName=ke;var ee=Z;const Ce=K("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),M=l.forwardRef(({className:t,...s},n)=>e(ee,{ref:n,className:b(Ce(),t),...s}));M.displayName=ee.displayName;const Ie=K("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),F=l.forwardRef(({className:t,variant:s,...n},r)=>e("div",{ref:r,role:"alert",className:b(Ie({variant:s}),t),...n}));F.displayName="Alert";const Ae=l.forwardRef(({className:t,...s},n)=>e("h5",{ref:n,className:b("mb-1 font-medium leading-none tracking-tight",t),...s}));Ae.displayName="AlertTitle";const E=l.forwardRef(({className:t,...s},n)=>e("div",{ref:n,className:b("text-sm [&_p]:leading-relaxed",t),...s}));E.displayName="AlertDescription";function De({onSubmitButton:t}){const[s,n]=l.useState(""),[r,c]=l.useState("");return e("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:a(C,{className:"w-full max-w-md border-purple-800 bg-gray-900 text-white",children:[a(L,{className:"space-y-1",children:[e(Q,{className:"text-2xl font-bold text-center",children:"Team Login"}),e(H,{className:"text-gray-400 text-center",children:"Enter your team name to start the aptitude test"})]}),a("form",{onSubmit:i=>{if(i.preventDefault(),!s.trim()){c("Please enter a team name");return}localStorage.setItem("teamName",s),localStorage.removeItem("testStarted"),localStorage.removeItem("testCompleted"),localStorage.removeItem("answers"),localStorage.removeItem("endTime"),t()},children:[a(I,{className:"space-y-4",children:[r&&a(F,{variant:"destructive",className:"bg-red-900 border-red-800",children:[e(X,{className:"h-4 w-4"}),e(E,{children:r})]}),a("div",{className:"space-y-2",children:[e(M,{htmlFor:"teamName",children:"Team Name"}),e(G,{id:"teamName",placeholder:"Enter your team name",value:s,onChange:i=>n(i.target.value),className:"bg-gray-800 border-gray-700 focus-visible:ring-purple-500"})]}),e("div",{className:"text-sm text-gray-400",children:e("p",{children:"You will have 30 minutes to complete the test once you start."})})]}),e(V,{children:e(T,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:"Start Test"})})]})]})})}async function te(){const t=await _.get(`${O}event/ITManager/ITManager`);return console.log("Question log",t.data),t.data}async function Re(t){console.log("Data is: ",t);const s=await _.post(`${O}event/ITManager/ITManager`,t);return console.log("Post log",s.data),s}const $e=async()=>{try{const t=await _.get(`${O}event/admin/ITManager`);return console.log("Fetched results:",t.data),t.data}catch(t){return console.error("Failed to fetch results:",t),[]}};function je({onCompleat:t}){const[s,n]=l.useState(""),[r,c]=l.useState({}),[u,i]=l.useState(30*60),[h,g]=l.useState(!1),[m,y]=l.useState(!1),[A,Y]=l.useState(""),[x,z]=l.useState(!1),[p,ae]=l.useState([]),[se,U]=l.useState(!0),[w,B]=l.useState(null),D=l.useRef([]);l.useEffect(()=>{(async()=>{try{U(!0);const S=(await te()).map(j=>({question:j.question,options:j.options}));ae(S),D.current=new Array(S.length).fill(null)}catch{Y("Failed to load questions. Please try again.")}finally{U(!1)}})();const o=localStorage.getItem("teamName");if(!o||(n(o),localStorage.getItem("testCompleted")==="true"))return;const N=localStorage.getItem("answers");if(N&&c(JSON.parse(N)),localStorage.getItem("testStarted")==="true"){g(!0);const $=localStorage.getItem("endTime");if($){const j=Number.parseInt($,10),ce=Math.floor(Date.now()/1e3),ie=Math.max(0,j-ce);i(ie)}const S=localStorage.getItem("startTime");S&&B(Number.parseInt(S,10))}},[]),l.useEffect(()=>{if(!h)return;if(localStorage.setItem("testStarted","true"),localStorage.setItem("answers",JSON.stringify(r)),w&&localStorage.setItem("startTime",w.toString()),!localStorage.getItem("endTime")){const o=Math.floor(Date.now()/1e3)+u;localStorage.setItem("endTime",o.toString())}const d=setInterval(()=>{i(o=>o<=1?(clearInterval(d),J(),0):o-1)},1e3);return()=>clearInterval(d)},[h,r,w]);const re=()=>{g(!0),B(Math.floor(Date.now()/1e3))},ne=(d,o)=>{c(f=>({...f,[d]:o})),x&&z(!1)},le=()=>{var d;if(Object.keys(r).length<p.length){z(!0);const o=p.findIndex((f,N)=>r[N]===void 0);o!==-1&&D.current[o]&&((d=D.current[o])==null||d.scrollIntoView({behavior:"smooth",block:"center"}));return}J()},J=async()=>{const d=Math.floor(Date.now()/1e3),o=w?d-w:0,f={teamName:s,answers:r,totalQuestions:p.length,timestamp:new Date().toISOString(),duration:o};try{await Re(f),localStorage.setItem("testCompleted","true"),y(!0),t()}catch{Y("Failed to submit results to server."),localStorage.setItem("testCompleted","true"),t()}},oe=d=>{const o=Math.floor(d/60),f=d%60;return`${o.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`};if(se)return e("div",{className:"min-h-screen bg-gray-100 p-4 flex items-center justify-center",children:e("div",{children:"Loading questions..."})});if(A)return e("div",{className:"min-h-screen bg-gray-100 p-4 flex items-center justify-center",children:e("div",{className:"text-red-500",children:A})});if(!h)return e("div",{className:"min-h-screen bg-gray-100 p-4 text-black",children:a("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6",children:[a("h1",{className:"text-2xl font-bold mb-4",children:["Welcome, ",s,"!"]}),a("div",{className:"mb-6",children:[e("h2",{className:"text-xl font-semibold mb-2",children:"Test Instructions:"}),a("ul",{className:"list-disc pl-5 space-y-2",children:[e("li",{children:"You will have 30 minutes to complete the test."}),a("li",{children:["The test consists of ",p.length," multiple-choice questions."]}),e("li",{children:"All questions are displayed on a single page."}),e("li",{children:"You must answer all questions before submitting."}),e("li",{children:"The test will be automatically submitted when the timer ends."})]})]}),e(T,{onClick:re,className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Start Test Now"})]})});const R=p.length-Object.keys(r).length;return p.map((d,o)=>r[o]===void 0?o:null).filter(d=>d!==null),e(q,{children:a("div",{className:"min-h-screen bg-gray-100 pb-20 text-black",children:[e("div",{className:"sticky top-0 z-10 bg-white shadow-md p-4",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"flex justify-between items-center mb-3",children:[e("div",{children:a("h1",{className:"font-bold",children:["Team: ",s]})}),a("div",{className:"flex items-center gap-2 text-lg font-bold",children:[e(Ne,{className:`h-5 w-5 ${u<300?"text-red-500":"text-gray-700"}`}),e("span",{className:u<300?"text-red-500":"text-gray-700",children:oe(u)})]})]}),a("div",{className:"flex items-center justify-between mb-2",children:[a("span",{className:"text-sm font-medium text-gray-700",children:["Progress: ",Object.keys(r).length," of ",p.length," questions Ditails zur Seite gehen und dort eine neue Seite in einem neuen Fenster Ã¶ffnen Progress: ",Object.keys(r).length," of ",p.length," questions answered"]}),a("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(Object.keys(r).length/p.length*100),"%"]})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e("div",{className:"bg-purple-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${Object.keys(r).length/p.length*100}%`}})})]})}),e("div",{className:"container mx-auto px-4 pt-6",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"mb-6",children:[e("h2",{className:"text-2xl font-bold mb-2",children:"IT Manager Aptitude Test"}),a("p",{className:"text-gray-600",children:["Answer all ",p.length," questions below. Your answers are saved automatically."]})]}),x&&R>0&&a(F,{variant:"destructive",className:"mb-6 bg-amber-50 border-amber-200 text-amber-800",children:[e(we,{className:"h-4 w-4 text-amber-800"}),a(E,{className:"text-amber-800",children:["Please answer all questions before submitting. You have ",R," unanswered questions."]})]}),e("div",{className:"space-y-8",children:p.map((d,o)=>{const f=r[o]!==void 0;return e("div",{ref:N=>D.current[o]=N,className:`transition-all duration-300 ${x&&!f?"ring-2 ring-red-400 rounded-lg":""}`,children:e(C,{className:`border-gray-200 ${x&&!f?"bg-red-50":f?"bg-green-50 border-green-200":""}`,children:a(I,{className:"pt-6",children:[a("div",{className:"mb-4 flex items-start",children:[e("span",{className:`flex items-center justify-center rounded-full w-8 h-8 mr-3 flex-shrink-0 ${f?"bg-green-100 text-green-800":x?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:o+1}),e("h3",{className:"text-lg font-semibold",children:d.question})]}),e("div",{className:"space-y-3 pl-11",children:d.options.map((N,v)=>a("div",{onClick:()=>ne(o,v),className:`flex items-center p-3 rounded-lg border cursor-pointer transition-all ${r[o]===v?"bg-purple-100 border-purple-300":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center mr-3 ${r[o]===v?"border-purple-600":"border-gray-300"}`,children:r[o]===v&&e("div",{className:"w-3 h-3 rounded-full bg-purple-600"})}),e(M,{className:"cursor-pointer w-full",children:N})]},v))})]})})},o)})}),e("div",{className:"mt-8 sticky bottom-4 flex justify-center",children:e(T,{onClick:le,size:"lg",className:"w-full md:w-auto bg-purple-600 hover:bg-purple-700 px-8 py-6 text-lg",children:R>0?`Submit Test (${R} questions remaining)`:"Submit Test"})})]})})]})})}function Le(){const[t,s]=l.useState(""),[n,r]=l.useState(null),[c,u]=l.useState(0);return l.useEffect(()=>{if(!(localStorage.getItem("testCompleted")==="true"))return;const h=localStorage.getItem("teamName");if(!h)return;s(h);const m=JSON.parse(localStorage.getItem("allResults")||"[]").find(y=>y.teamName===h);m&&(r(m.score),u(m.totalQuestions))},[]),e("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:a(C,{className:"w-full max-w-md",children:[a(L,{className:"text-center",children:[e("div",{className:"flex justify-center mb-4",children:e(fe,{className:"h-16 w-16 text-green-500"})}),e(Q,{className:"text-2xl font-bold",children:"Test Completed!"})]}),a(I,{className:"space-y-6",children:[a("div",{className:"text-center",children:[a("p",{className:"text-lg mb-2",children:["Thank you, ",e("span",{className:"font-semibold",children:t}),"!"]}),e("p",{className:"text-gray-600",children:"Your responses have been recorded."})]}),a("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e("p",{className:"text-gray-600",children:"Your responses have been recorded successfully."}),e("p",{className:"text-gray-600 mt-2",children:"Thank you for participating in the IT Manager Aptitude Test!"})]}),e("div",{className:"pt-4",children:e(de,{to:"/",children:e(T,{className:"w-full bg-purple-600 hover:bg-purple-700",children:"Return to Home"})})})]})]})})}function Qe({onAdmin:t}){const[s,n]=l.useState(""),[r,c]=l.useState("");return me(),console.log("hii"),e("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:a(C,{className:"w-full max-w-md border-purple-800 bg-gray-900 text-white",children:[a(L,{className:"space-y-1",children:[e("div",{className:"flex justify-center mb-2",children:e(ve,{className:"h-12 w-12 text-purple-500"})}),e(Q,{className:"text-2xl font-bold text-center",children:"Host Login"}),e(H,{className:"text-gray-400 text-center",children:"Access the admin dashboard to view test results"})]}),a("form",{onSubmit:i=>{i.preventDefault(),s==="admin123"?(localStorage.setItem("isHost","true"),t()):c("Invalid password")},children:[a(I,{className:"space-y-4",children:[r&&a(F,{variant:"destructive",className:"bg-red-900 border-red-800",children:[e(X,{className:"h-4 w-4"}),e(E,{children:r})]}),a("div",{className:"space-y-2",children:[e(M,{htmlFor:"password",children:"Password"}),e(G,{id:"password",type:"password",placeholder:"Enter host password",value:s,onChange:i=>n(i.target.value),className:"bg-gray-800 border-gray-700 focus-visible:ring-purple-500"})]})]}),e(V,{children:e(T,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:"Login"})})]})]})})}const Me=({results:t})=>{const s=t.length>0?(t.reduce((r,c)=>r+c.duration,0)/t.length).toFixed(2):"0.00",n=()=>{const r=["Rank,Team Name,Score,Accuracy (%),Duration (s),Timestamp"],c=t.sort((g,m)=>m.score-g.score).map((g,m)=>`${m+1},${g.teamName},${g.score}/${g.totalQuestions},${g.accuracyScore},${g.duration},${new Date(g.timestamp).toLocaleString()}`),u=[...r,...c].join(`
`),i=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.href=URL.createObjectURL(i),h.download="leaderboard.csv",h.click()};return a("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Leaderboard"}),a("div",{className:"mb-4 flex justify-between items-center",children:[a("p",{className:"text-gray-600",children:["Total Teams: ",t.length]}),a("p",{className:"text-gray-600",children:["Average Duration: ",s," seconds"]}),e("button",{onClick:n,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Export to CSV"})]}),a("table",{className:"w-full text-left",children:[e("thead",{children:a("tr",{className:"bg-gray-200",children:[e("th",{className:"p-3",children:"Rank"}),e("th",{className:"p-3",children:"Team Name"}),e("th",{className:"p-3",children:"Score"}),e("th",{className:"p-3",children:"Accuracy (%)"}),e("th",{className:"p-3",children:"Duration (s)"}),e("th",{className:"p-3",children:"Timestamp"})]})}),e("tbody",{children:t.sort((r,c)=>c.score-r.score).map((r,c)=>a("tr",{className:"border-b",children:[e("td",{className:"p-3",children:c+1}),e("td",{className:"p-3",children:r.teamName}),a("td",{className:"p-3",children:[r.score,"/",r.totalQuestions]}),e("td",{className:"p-3",children:r.accuracyScore}),e("td",{className:"p-3",children:r.duration}),e("td",{className:"p-3",children:new Date(r.timestamp).toLocaleString()})]},r._id))})]})]})},Fe=({questions:t})=>(console.log("Question arrr: ",t),!Array.isArray(t)||t.length===0?a("div",{className:"bg-white p-6 rounded-lg shadow-md mt-6",children:[e("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Questions"}),e("p",{className:"text-gray-600",children:"No questions available."})]}):a("div",{className:"bg-white p-6 rounded-lg shadow-md mt-6",children:[e("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Questions"}),a("p",{className:"text-gray-600 mb-4",children:["Total Questions: ",t.length]}),e("div",{className:"space-y-4",children:t.map((s,n)=>a("div",{className:"border p-4 rounded-md",children:[a("p",{className:"font-semibold",children:["Question ",n+1,": ",s.question]}),e("ul",{className:"list-disc ml-6 mt-2",children:s.options.map((r,c)=>e("li",{className:"text-gray-600",children:r},c))})]},s._id))})]}));function W(){const[t,s]=l.useState([]),[n,r]=l.useState([]),[c,u]=l.useState(!0),[i,h]=l.useState(null);return l.useEffect(()=>{(async()=>{try{const[m,y]=await Promise.all([$e(),te()]);console.log("Questions data:",y);const A=Array.isArray(y)?y:[];s(m),r(A),console.log("Questions Added: ",n)}catch(m){console.error("Error fetching data:",m),h("Failed to fetch data. Please try again later.")}finally{u(!1)}})()},[]),c?e("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):i?e("div",{className:"flex justify-center items-center h-screen text-red-500",children:i}):a("div",{className:"container mx-auto p-4",children:[e("h1",{className:"text-3xl font-bold text-center mb-6 text-gray-800",children:"Host Dashboard"}),e(Me,{results:t}),e(Fe,{questions:n})]})}function Ve(){const[t,s]=l.useState(!0),[n,r]=l.useState(!1),[c,u]=l.useState(!1);return a(ue,{children:[e(P,{path:"/admin/*",element:e(q,{children:c?e(W,{}):e(Qe,{onAdmin:()=>{u(m=>!m)}})})}),e(P,{path:"/Dashboard",element:e(W,{})}),e(P,{path:"",element:e(q,{children:n?e(Le,{}):t?e(De,{onSubmitButton:()=>{s(m=>!m)}}):e(je,{onCompleat:()=>{r(m=>!m)}})})})]})}export{Ve as default};
