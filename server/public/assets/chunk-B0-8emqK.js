import{c as R,r as h,a as r,j as e,k as $,u as ve,l as pe,F as ie,m as Ie,n as U}from"./index-D-KVffrF.js";import{T as Se,a as Qe,b as Te,c as ze,d as ke,e as qe,z as Oe,f as Ce,P as Ee,C as fe,Q as Ae,g as Le}from"./chunk-CWLSSDXa.js";import{t as _e,c as Pe}from"./chunk-Crj-qy2Q.js";import{C as J}from"./chunk-ChvClh_T.js";import{X as G}from"./chunk-Dx9lbt6X.js";import{U as je,T as Me}from"./chunk-CVQrkkAb.js";import{B as oe}from"./chunk-CwSrGitM.js";import"./chunk-BwON3VGT.js";const De=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],de=R("Award",De);const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Be=R("CircleDot",Re);const We=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Je=R("FileSpreadsheet",We);const Ge=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],Ue=R("Hexagon",Ge);const Fe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],He=R("Hourglass",Fe);const $e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ve=R("Square",$e);const Ke=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],Ze=R("Triangle",Ke);const Ye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ge=R("Users",Ye),Xe=1,et=1e6;let re=0;function tt(){return re=(re+1)%Number.MAX_SAFE_INTEGER,re.toString()}const ae=new Map,he=n=>{if(ae.has(n))return;const s=setTimeout(()=>{ae.delete(n),H({type:"REMOVE_TOAST",toastId:n})},et);ae.set(n,s)},st=(n,s)=>{switch(s.type){case"ADD_TOAST":return{...n,toasts:[s.toast,...n.toasts].slice(0,Xe)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===s.toast.id?{...t,...s.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=s;return t?he(t):n.toasts.forEach(a=>{he(a.id)}),{...n,toasts:n.toasts.map(a=>a.id===t||t===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==s.toastId)}}},ee=[];let te={toasts:[]};function H(n){te=st(te,n),ee.forEach(s=>{s(te)})}function nt({...n}){const s=tt(),t=l=>H({type:"UPDATE_TOAST",toast:{...l,id:s}}),a=()=>H({type:"DISMISS_TOAST",toastId:s});return H({type:"ADD_TOAST",toast:{...n,id:s,open:!0,onOpenChange:l=>{l||a()}}}),{id:s,dismiss:a,update:t}}function V(){const[n,s]=h.useState(te);return h.useEffect(()=>(ee.push(s),()=>{const t=ee.indexOf(s);t>-1&&ee.splice(t,1)}),[n]),{...n,toast:nt,dismiss:t=>H({type:"DISMISS_TOAST",toastId:t})}}function it(){const{toasts:n}=V();return r(Se,{children:[n.map(function({id:s,title:t,description:a,action:l,...i}){return r(Qe,{...i,children:[r("div",{className:"grid gap-1",children:[t&&e(Te,{children:t}),a&&e(ze,{children:a})]}),l,e(ke,{})]},s)}),e(qe,{})]})}const ot=({...n})=>{const{theme:s="system"}=Oe();return e(Ce,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function L(...n){return _e(Pe(n))}const rt=Ee,at=h.forwardRef(({className:n,sideOffset:s=4,...t},a)=>e(fe,{ref:a,sideOffset:s,className:L("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));at.displayName=fe.displayName;const E=({variant:n="primary",size:s="md",children:t,className:a,fullWidth:l=!1,...i})=>{const m="rounded-lg font-medium transition-all duration-200 inline-flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 btn-hover interactive-btn",o={primary:"bg-primary text-white hover:bg-primary/90 focus:ring-primary shadow-md border border-white/10",secondary:"bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-500 shadow-md border border-white/10",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/10 focus:ring-primary shadow",ghost:"text-primary hover:bg-primary/10 focus:ring-primary"},S={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-5 py-2.5 text-lg"};return e("button",{className:L(m,o[n],S[s],l?"w-full":"",a),...i,children:t})},y=({children:n,className:s="",delay:t=0,animation:a="fade-in"})=>{const[l,i]=h.useState(!1);return h.useEffect(()=>{const o=setTimeout(()=>{i(!0)},t);return()=>clearTimeout(o)},[t]),e("div",{className:L("transition-all duration-500 ease-out",l?{"fade-in":"animate-fade-in","slide-up":"animate-slide-up","slide-down":"animate-slide-down","scale-in":"animate-scale-in"}[a]+" opacity-100":"opacity-0",s),style:{animationDelay:`${t}ms`},children:n})},lt=()=>{const n=$(),[s,t]=h.useState(null);return e("div",{className:"min-h-screen animated-bg overflow-hidden",children:r("div",{className:"container max-w-6xl mx-auto px-4 py-12 md:py-24",children:[r(y,{animation:"slide-down",className:"text-center mb-16",children:[e("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight mb-4",children:e("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-blue-600",children:"IT Quiz"})}),e("p",{className:"text-xl md:text-2xl text-white/80 max-w-3xl mx-auto",children:"Participate in an interactive IT knowledge quiz"})]}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[e(y,{delay:400,animation:"slide-up",children:r("div",{className:L("glass rounded-2xl p-8 text-center transition-all duration-300",s==="itparticipant"?"shadow-lg scale-[1.01]":"shadow"),onMouseEnter:()=>t("itparticipant"),onMouseLeave:()=>t(null),children:[e("div",{className:"mb-6 inline-flex items-center justify-center w-16 h-16 rounded-full bg-purple-100 text-purple-800",children:e(ge,{className:"h-8 w-8"})}),e("h2",{className:"text-2xl font-semibold mb-3 text-white",children:"Join as Participant"}),e("p",{className:"text-white/80 mb-6",children:"Enter your team name to join the IT quiz and test your knowledge."}),e(E,{size:"lg",variant:"outline",onClick:()=>n("itquizparticipant"),fullWidth:!0,children:"Join Quiz"})]})}),e(y,{delay:500,animation:"slide-up",children:r("div",{className:L("glass rounded-2xl p-8 text-center transition-all duration-300",s==="ithost"?"shadow-lg scale-[1.01]":"shadow"),onMouseEnter:()=>t("ithost"),onMouseLeave:()=>t(null),children:[e("div",{className:"mb-6 inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-100 text-orange-800",children:e(de,{className:"h-8 w-8"})}),e("h2",{className:"text-2xl font-semibold mb-3 text-white",children:"Host IT Quiz"}),e("p",{className:"text-white/80 mb-6",children:"Start an IT quiz session and monitor participants in real-time."}),e(E,{size:"lg",variant:"outline",onClick:()=>n("itquizhost"),fullWidth:!0,children:"Host Quiz"})]})})]})]})})},ct=()=>{const n=ve();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),e("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:r("div",{className:"text-center",children:[e("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},dt=({duration:n,onTimeUp:s,isActive:t=!0,size:a="md"})=>{const[l,i]=h.useState(n),m=h.useRef(null),[o,S]=h.useState(0),[u,d]=h.useState({}),c=h.useRef(null),p=h.useRef(null);h.useEffect(()=>(c.current=new Audio("/tick.mp3"),p.current=new Audio("/time-up.mp3"),()=>{c.current&&(c.current.pause(),c.current=null),p.current&&(p.current.pause(),p.current=null)}),[]),h.useEffect(()=>{if(m.current){const _=m.current.r.baseVal.value*2*Math.PI;S(_)}},[]),h.useEffect(()=>{i(n)},[n]),h.useEffect(()=>{if(!t)return;const N=setInterval(()=>{i(_=>{if(_<=1)return clearInterval(N),s&&s(),p.current&&p.current.play().catch(A=>{console.log("Error playing time-up sound:",A)}),0;const P=_-1;return P<=5&&!u[P]&&c.current&&(c.current.currentTime=0,c.current.play().catch(A=>{console.log("Error playing tick sound:",A)}),d(A=>({...A,[P]:!0}))),P})},1e3);return()=>clearInterval(N)},[t,n,s,u]);const b=()=>{switch(a){case"sm":return"h-14 w-14 text-lg";case"lg":return"h-24 w-24 text-3xl";case"md":default:return"h-20 w-20 text-2xl"}},f=()=>{switch(a){case"sm":return 4;case"lg":return 8;case"md":default:return 6}},w=N=>l===0||n===0?0:(n-N)/n*o,C=()=>{const N=l/n*100;return N<=25?"text-red-500":N<=50?"text-yellow-500":"text-green-500"};return r("div",{className:L("relative flex items-center justify-center",b()),children:[r("svg",{className:"h-full w-full -rotate-90",children:[e("circle",{className:"text-gray-600/20",strokeWidth:f(),stroke:"currentColor",fill:"transparent",r:"45%",cx:"50%",cy:"50%"}),e("circle",{className:L("timer-circle",C()),ref:m,strokeWidth:f(),strokeDashoffset:w(l),strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"45%",cx:"50%",cy:"50%",style:{animationDuration:`${n}s`,animationPlayState:t?"running":"paused"}})]}),e("span",{className:L("absolute font-bold text-white",l<=5?"animate-pulse text-red-500":""),children:l})]})},le=({question:n,onAnswer:s,answered:t=!1,selectedAnswer:a,correctAnswer:l,isHost:i=!1,playerView:m=!1})=>{const o=["quiz-option-red","quiz-option-blue","quiz-option-yellow","quiz-option-green"],S=[e(Be,{className:"h-7 w-7"}),e(Ve,{className:"h-7 w-7"}),e(Ze,{className:"h-7 w-7"}),e(Ue,{className:"h-7 w-7"})],u=(d,c)=>{let p=`quiz-option ${o[c]} text-high-contrast interactive-option`;return t&&(c===l?p+=" ring-4 ring-green-500 ring-opacity-80":c===a&&c!==l?p+=" ring-4 ring-red-500 ring-opacity-80 opacity-80":p+=" opacity-70"),e(y,{delay:150+c*100,animation:"slide-up",className:`w-full ${m&&!i?"h-20":""}`,children:e("button",{className:L(p,m&&!i?"flex items-center justify-center":""),onClick:()=>!t&&s(c),disabled:t||i,children:m&&!i?e("div",{className:"flex items-center justify-center h-full",children:r("div",{className:`w-16 h-16 ${c===0?"rounded-full":c===1?"rounded":c===2?"rounded-full rounded-tl-none":"rounded-xl"} bg-white flex items-center justify-center`,children:[t&&c===l&&e(J,{className:"h-6 w-6 text-green-600"}),t&&c===a&&c!==l&&e(G,{className:"h-6 w-6 text-red-600"}),!t&&S[c]]})}):r("div",{className:"flex items-center space-x-3",children:[c===0&&r("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:[t&&c===l&&e(J,{className:"h-4 w-4 text-green-600"}),t&&c===a&&c!==l&&e(G,{className:"h-4 w-4 text-red-600"})]}),c===1&&r("div",{className:"w-6 h-6 bg-white rounded flex items-center justify-center",children:[t&&c===l&&e(J,{className:"h-4 w-4 text-green-600"}),t&&c===a&&c!==l&&e(G,{className:"h-4 w-4 text-red-600"})]}),c===2&&r("div",{className:"w-6 h-6 bg-white rounded-full rounded-tl-none flex items-center justify-center",children:[t&&c===l&&e(J,{className:"h-4 w-4 text-green-600"}),t&&c===a&&c!==l&&e(G,{className:"h-4 w-4 text-red-600"})]}),c===3&&r("div",{className:"w-6 h-6 bg-white rounded-xl border-2 border-white/80 flex items-center justify-center",children:[t&&c===l&&e(J,{className:"h-4 w-4 text-green-600"}),t&&c===a&&c!==l&&e(G,{className:"h-4 w-4 text-red-600"})]}),e("span",{className:"font-medium text-lg",children:d})]})})},c)};return r("div",{className:"w-full max-w-2xl mx-auto",children:[(!m||i)&&e(y,{delay:50,animation:"slide-down",className:"w-full",children:r("div",{className:"bg-card rounded-xl p-6 shadow-sm mb-6 border border-white/10",children:[e("h2",{className:"text-xl font-semibold mb-2 text-white",children:n.question}),n.image&&e("div",{className:"my-4 rounded-lg overflow-hidden border border-white/20",children:e("img",{src:n.image,alt:n.question,className:"w-full h-auto object-cover"})})]})}),e("div",{className:L("grid gap-10",m&&!i?"grid-cols-2 sm:grid-cols-2 justify-items-center max-w-md mx-auto":"grid-cols-2"),children:n.options.map((d,c)=>u(d,c))})]})},ut=({players:n,quizTitle:s})=>r(E,{onClick:()=>{const a=["Rank","Team Name","Score","Correct Answers","Total Questions"],i=[...n].sort((p,b)=>b.totalPoints-p.totalPoints).map((p,b)=>{const f=b+1,w=p.answers.length,C=p.answers.filter(N=>N.correct).length;return[f,p.name,p.totalPoints,C,w]}),m=[a.join(","),...i.map(p=>p.join(","))].join(`
`),o=new Blob([m],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(o),u=document.createElement("a"),d=s.replace(/[^a-z0-9]/gi,"_").toLowerCase(),c=new Date().toISOString().slice(0,10);u.href=S,u.setAttribute("download",`${d}_scores_${c}.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(S)},className:"flex items-center gap-2",variant:"primary",children:[e(Je,{size:18}),e("span",{children:"Download Scores"})]}),mt=[{question:"Which of the following is NOT an input device?",options:["Keyboard","Mouse","Monitor","Scanner"],correctOptionIndex:2,timeLimit:15,points:1e3},{question:"Which of the following is NOT a NoSQL database?",options:["MongoDB","Redis","MySQL","Cassandra"],correctOptionIndex:2,timeLimit:30,points:1e3},{question:"In cloud computing, what does IaaS stand for?",options:["Internet as a Service","Infrastructure as a Service","Information as a Service","Integration as a Service"],correctOptionIndex:1,timeLimit:11,points:1e3},{question:"Which of the following is NOT a valid HTTP request method?",options:["GET","DELETE","POST","PUSH"],correctOptionIndex:3,timeLimit:20,points:1e3},{question:"What does URL stand for?",options:["Uniform Resource Locator","Universal Resource Link","Uniform Response Link","Unique Resource Locator"],correctOptionIndex:0,timeLimit:25,points:1e3},{question:"Who built the first mobile cell phone and made the first cell phone call?",options:["Charles Babbage","Charles Baudelaire","Martin Cooper","Alfred George"],correctOptionIndex:2,timeLimit:12,points:1e3},{question:"ENIAC (Electronic Numerical Integrator and Computer), was introduced to the world on ?",options:["1882","1946","1919","1925"],correctOptionIndex:1,timeLimit:18,points:1e3},{question:"When was Java came into existence?",options:["1992-1993","1970-1980","1990-1993","1995-1996"],correctOptionIndex:3,timeLimit:22,points:1e3},{question:"What is the primary role of a CDN (Content Delivery Network)?",options:["Distributing content to reduce latency and load times","Managing domain name registrations","Storing backup copies of databases","Encrypting data transmissions"],correctOptionIndex:0,timeLimit:15,points:1e3},{question:"Which is the oldest phone in the world?",options:["Cordless phone","Motorola DynaTAC 8000X","BlackBerry AT100","Nokia M120"],correctOptionIndex:1,timeLimit:28,points:1e3},{question:"How many types of motherboard are there in this world?",options:["15-16","8-9","12-15","5-10"],correctOptionIndex:2,timeLimit:13,points:1e3},{question:"Name the world's first computer?",options:["Arne Freundt","ENIAC","Zipse","Gernot Dollne"],correctOptionIndex:1,timeLimit:19,points:1e3},{question:"What does the term 'Big Data' refer to?",options:["High-resolution images and videos","Data stored only in physical hard drives","A collection of complex and voluminous datasets","Large-sized files stored in a computer"],correctOptionIndex:2,timeLimit:24,points:1e3},{question:"Which programming language is widely used for AI and machine learning?",options:["Java","Python","C++","PHP"],correctOptionIndex:1,timeLimit:14,points:1e3},{question:"Which of the following is a key feature of Artificial Intelligence (AI)?",options:["Physical hardware upgrades","Data replication","Simple rule-based calculations","Human-like decision-making capabilities"],correctOptionIndex:3,timeLimit:27,points:1e3},{question:"Who is the CEO of YouTube?",options:["Satya Nadella","Tim Berners-Lee","Neal Mohan","Chad Hurley"],correctOptionIndex:2,timeLimit:16,points:1e3},{question:"If a file is 4MB in size, how many kilobytes (KB) is it?",options:["5000 KB","4000 KB","1024 KB","4096 KB"],correctOptionIndex:3,timeLimit:21,points:1e3},{question:"What is the hexadecimal representation of the decimal number 15?",options:["E","F","10","1F"],correctOptionIndex:1,timeLimit:10,points:1e3},{question:"What is the full form of Wi-Fi?",options:["Wireless Fidelity","Wireless Feature","Wide Frequency Internet","Wired Fiber"],correctOptionIndex:0,timeLimit:23,points:1e3},{question:"If a computer has 8GB of RAM, how many megabytes (MB) is that?",options:["8000 MB","1024 MB","5000 MB","8192 MB"],correctOptionIndex:3,timeLimit:17,points:1e3},{question:"What is an array in programming?",options:["A function that repeats a task","A storage that holds only one value","A list that can store multiple values in a single variable","A software used for designing websites"],correctOptionIndex:2,timeLimit:25,points:1e3},{question:"What is the purpose of a database management system (DBMS)?",options:["To store and organize large amounts of structured data efficiently","To create and design web applications","To increase internet browsing speed","To protect computers from viruses"],correctOptionIndex:0,timeLimit:12,points:1e3},{question:"If a hard drive has 1TB of storage and 250GB is used, how much is left?",options:["500GB","750GB","850B","900GB"],correctOptionIndex:1,timeLimit:19,points:1e3},{question:"When was Google invented?",options:["1998","2000","1980","1995"],correctOptionIndex:0,timeLimit:14,points:1e3},{question:"In IT, what does 'encryption' refer to?",options:["Hiding a file in a secret folder","Deleting unwanted files permanently","Making the internet connection faster","Converting data into a secure code"],correctOptionIndex:3,timeLimit:26,points:1e3},{question:"What does ACID stand for in database transactions?",options:["Atomicity, Consistency, Isolation, Durability","Accuracy, Control, Integrity, Data","Algorithm, Control, Input, Data","Access, Connectivity, Integrity, Durability"],correctOptionIndex:0,timeLimit:13,points:1e3},{question:"In a binary search tree (BST), the left subtree of a node contains only nodes with values ________.",options:["Greater than the node","Smaller than the node","Both greater and smaller","Unsorted values"],correctOptionIndex:1,timeLimit:20,points:1e3},{question:"The worst-case time complexity of QuickSort is?",options:["O(n log n)","O(n²)","O(n)","O(log n)"],correctOptionIndex:1,timeLimit:15,points:1e3},{question:"What is the primary function of a firewall?",options:["Speed up internet connections","Block unauthorized access","Encrypt network data","Improve Wi-Fi signals"],correctOptionIndex:1,timeLimit:22,points:1e3},{question:"What is the purpose of a VPN (Virtual Private Network)?",options:["Increase internet speed","Provide secure remote access","Create a public IP address","Remove malware"],correctOptionIndex:1,timeLimit:18,points:1e3}],ce={id:"itquiz123",title:"IT Knowledge Quiz",description:"Test your knowledge of information technology concepts and terms",createdAt:Date.now(),questions:mt},Y=[ce],X="kahoot_clone_quizzes",j="kahoot_clone_sessions",xe=()=>Math.random().toString(36).substring(2,6).toUpperCase(),ht=n=>[...n.questions],pt=()=>{const n=localStorage.getItem(X);if(n)try{const s=JSON.parse(n);return s.some(a=>a.id===ce.id)||(s.push(ce),localStorage.setItem(X,JSON.stringify(s))),s}catch(s){return console.error("Error parsing stored quizzes:",s),localStorage.setItem(X,JSON.stringify(Y)),Y}return localStorage.setItem(X,JSON.stringify(Y)),Y},D=n=>pt().find(t=>t.id===n),se=n=>{const s=B(),t=xe(),a=D(n);if(!a)throw new Error(`Quiz with ID ${n} not found`);const l=ht(a),i={id:t,quizId:n,players:[],currentQuestionIndex:-1,status:"waiting",selectedQuestions:l},m=[...s,i];return localStorage.setItem(j,JSON.stringify(m)),i},B=()=>{const n=localStorage.getItem(j);if(n)try{return JSON.parse(n)}catch(s){return console.error("Error parsing game sessions:",s),[]}return[]},O=n=>B().find(t=>t.id===n),ft=(n,s)=>{const t=B(),a=t.findIndex(m=>m.id===n);if(a===-1)return null;const i={id:xe(),name:s,answers:[],totalPoints:0};return t[a].players.push(i),localStorage.setItem(j,JSON.stringify(t)),i},gt=n=>{const s=B(),t=s.findIndex(a=>a.id===n);return t===-1||s[t].status!=="waiting"?null:(s[t].status="active",s[t].currentQuestionIndex=0,s[t].startTime=Date.now(),localStorage.setItem(j,JSON.stringify(s)),s[t])},xt=(n,s,t,a)=>{const l=B(),i=l.findIndex(N=>N.id===n);if(i===-1||l[i].status!=="active")return null;const m=l[i],o=m.currentQuestionIndex;let S=-1,u=1e3,d=20;if(m.selectedQuestions&&m.selectedQuestions[o])S=m.selectedQuestions[o].correctOptionIndex,u=m.selectedQuestions[o].points||1e3,d=m.selectedQuestions[o].timeLimit||20;else{const N=D(m.quizId);if(!N)return null;S=N.questions[o].correctOptionIndex,u=N.questions[o].points||1e3,d=N.questions[o].timeLimit||20}const c=m.players.findIndex(N=>N.id===s);if(c===-1)return null;const p=t===S,b=Math.min(1,a/d),f=p?Math.max(0,Math.round(u*(1-b))):0,w={playerId:s,questionIndex:o,answerIndex:t,timeToAnswer:a,correct:p,points:f},C=m.players[c].answers.findIndex(N=>N.questionIndex===o);if(C!==-1){const N=m.players[c].answers[C].points;m.players[c].totalPoints-=N,m.players[c].answers[C]=w}else m.players[c].answers.push(w);return m.players[c].totalPoints+=f,localStorage.setItem(j,JSON.stringify(l)),w},yt=n=>{var m;const s=B(),t=s.findIndex(o=>o.id===n);if(t===-1||s[t].status!=="active")return null;const a=s[t],l=a.currentQuestionIndex+1,i=((m=a.selectedQuestions)==null?void 0:m.length)||0;return l>=i?(a.status="finished",localStorage.setItem(j,JSON.stringify(s)),-1):(a.currentQuestionIndex=l,localStorage.setItem(j,JSON.stringify(s)),l)},bt=n=>{const s=B(),t=s.findIndex(a=>a.id===n);return t===-1?null:(s[t].status="finished",localStorage.setItem(j,JSON.stringify(s)),s[t])},ye=n=>{const s=B(),t=s.findIndex(a=>a.id===n);t!==-1&&(s[t].players=[],localStorage.setItem(j,JSON.stringify(s)))},wt=()=>{const{quizId:n}=pe(),s=$(),{toast:t}=V(),[a,l]=h.useState(0),[i,m]=h.useState(null),[o,S]=h.useState(null),[u,d]=h.useState(null),[c,p]=h.useState(null),[b,f]=h.useState(!1);h.useEffect(()=>{if(!n){s("/");return}const Q=()=>{const T=D(n);if(!T){t({title:"Quiz not found",description:"The quiz you're trying to host doesn't exist",variant:"destructive"}),s("/");return}m(T)},g=()=>{const T=sessionStorage.getItem("hostSession");if(T)try{const z=JSON.parse(T);if(z.quizId===n){const I=O(z.gameId);if(I){if(S(I),I.status==="waiting")l(0);else if(I.status==="active"){if(l(1),I.selectedQuestions&&I.selectedQuestions[I.currentQuestionIndex])d(I.selectedQuestions[I.currentQuestionIndex]);else{const F=D(I.quizId);if(F){const W=F.questions[I.currentQuestionIndex];W&&d(W)}}f(!0)}else I.status==="finished"&&l(3);return}}}catch(z){console.error("Error parsing saved session:",z)}const q=se(n);S(q),sessionStorage.setItem("hostSession",JSON.stringify({gameId:q.id,quizId:n}))};Q(),g()},[n,s,t]),h.useEffect(()=>{if(a===0&&o){const Q=window.setInterval(()=>{const g=O(o.id);g&&S(g)},1e3);return p(Q),()=>{clearInterval(Q)}}else c&&(clearInterval(c),p(null))},[a,o]);const w=()=>{if(!o)return;if(o.players.length===0){t({title:"No players",description:"Wait for players to join before starting the game",variant:"destructive"});return}new Audio("/start-game.mp3").play().catch(()=>{console.log("Audio playback prevented - user hasn't interacted with the document yet")});const g=gt(o.id);if(g){if(S(g),g.selectedQuestions&&g.selectedQuestions.length>0)d(g.selectedQuestions[0]);else{const T=i==null?void 0:i.questions[0];T&&d(T)}l(1),f(!0)}},C=()=>{var q,z;if(!o||!i)return;new Audio("/next-question.mp3").play().catch(()=>{console.log("Audio playback prevented - user hasn't interacted with the document yet")});const g=yt(o.id);if(console.log("Debug - Next Question Index:",g),console.log("Debug - Current Index:",o.currentQuestionIndex),console.log("Debug - Total Questions:",((q=o.selectedQuestions)==null?void 0:q.length)||i.questions.length),g===null||g===-1){const I=((z=o.selectedQuestions)==null?void 0:z.length)||i.questions.length;if(o.currentQuestionIndex+1>=I){new Audio("/end-game.mp3").play().catch(()=>{console.log("Audio playback prevented - user hasn't interacted with the document yet")});const W=O(o.id);W&&(S(W),l(3))}else t({title:"Error",description:"Failed to advance to the next question",variant:"destructive"});return}let T=null;if(o.selectedQuestions&&o.selectedQuestions[g]?T=o.selectedQuestions[g]:i&&(T=i.questions[g]),T){d(T),l(1),f(!0);const I=O(o.id);I&&S(I)}},N=()=>{new Audio("/time-up.mp3").play().catch(g=>{console.log("Error playing time-up sound:",g)}),f(!1),l(2)},_=()=>{o&&(bt(o.id),sessionStorage.removeItem("hostSession"),s("/"))},P=()=>{switch(a){case 0:return A();case 1:return ue();case 2:return K();case 3:return me();default:return null}},A=()=>o?r("div",{className:"w-full max-w-3xl mx-auto px-4 sm:px-6",children:[r(y,{delay:100,className:"glass rounded-2xl p-6 sm:p-8 bg-opacity-80 shadow-lg",children:[r("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[r("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:["Teams Waiting (",o.players.length,")"]}),e(E,{onClick:w,disabled:o.players.length===0,className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-full transition-all",children:"Start Game"})]}),o.players.length===0?e("div",{className:"text-center py-12",children:e("p",{className:"text-gray-300 text-lg",children:"Waiting for teams to join..."})}):e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.players.map((Q,g)=>r(y,{delay:150+g*50,className:"bg-gray-800/50 p-4 rounded-xl flex items-center gap-3 hover:bg-gray-800/70 transition-colors",children:[e(je,{className:"w-5 h-5 text-blue-400"}),e("span",{className:"font-medium text-white truncate",children:Q.name})]},Q.id))})]}),e(y,{delay:200,className:"mt-6 flex justify-center",children:e(E,{variant:"outline",onClick:()=>s("/"),className:"w-full sm:w-auto border-gray-500 text-gray-300 hover:bg-gray-800 px-6 py-2 rounded-full transition-all",children:"Cancel"})})]}):null,ue=()=>{var q;if(!u)return null;const Q=O((o==null?void 0:o.id)||""),g=Q?Q.players.filter(z=>z.answers.some(I=>I.questionIndex===Q.currentQuestionIndex)).length:0,T=Q?Q.players.filter(z=>z.answers.some(I=>I.questionIndex===Q.currentQuestionIndex)):[];return r("div",{className:"w-full max-w-4xl mx-auto px-4 sm:px-6",children:[r("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[e(y,{children:r("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:["Question ",(o==null?void 0:o.currentQuestionIndex)!==void 0?o.currentQuestionIndex+1:"",o?` / ${((q=o.selectedQuestions)==null?void 0:q.length)||(i==null?void 0:i.questions.length)}`:""]})}),e(y,{delay:100,children:e(dt,{duration:u.timeLimit||20,onTimeUp:N,isActive:b,className:"bg-gray-800/50 p-3 rounded-full text-white text-lg font-semibold"})})]}),e(le,{question:u,onAnswer:()=>{},isHost:!0,className:"shadow-xl"}),e(y,{delay:150,className:"glass rounded-2xl p-6 mt-6 bg-opacity-80",children:g>0&&e("div",{className:"flex flex-wrap justify-center gap-3",children:T.map(z=>r("div",{className:"px-4 py-2 bg-green-600/20 text-green-300 border border-green-500/30 rounded-full text-sm hover:bg-green-600/30 transition-colors",children:[z.name," ✓"]},z.id))})})]})},K=()=>{var q;if(!u||!o)return null;const Q=o.players.flatMap(z=>z.answers.filter(I=>I.questionIndex===o.currentQuestionIndex)),g=Q.length,T=Q.filter(z=>z.correct).length;return r("div",{className:"w-full max-w-4xl mx-auto px-4 sm:px-6",children:[r(y,{className:"glass rounded-2xl p-6 sm:p-8 mb-8 bg-opacity-80 text-center shadow-lg",children:[e("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:"Question Results"}),r("div",{className:"flex flex-col sm:flex-row justify-center gap-8 sm:gap-12 mb-6",children:[r("div",{children:[e("p",{className:"text-sm text-gray-400 mb-2",children:"Responses"}),r("p",{className:"text-3xl sm:text-4xl font-bold text-white",children:[g,"/",o.players.length]})]}),r("div",{children:[e("p",{className:"text-sm text-gray-400 mb-2",children:"Correct"}),r("p",{className:"text-3xl sm:text-4xl font-bold text-green-400",children:[g>0?Math.round(T/g*100):0,"%"]})]})]})]}),e(le,{question:u,onAnswer:()=>{},answered:!0,correctAnswer:u.correctOptionIndex,isHost:!0,className:"shadow-xl"}),e(y,{delay:300,className:"mt-8 flex justify-center",children:e(E,{onClick:C,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full text-lg transition-all",children:o.currentQuestionIndex<(((q=o.selectedQuestions)==null?void 0:q.length)-1||0)?"Next Question":"See Final Results"})})]})},me=()=>{var g;if(!o)return null;const Q=((g=o.selectedQuestions)==null?void 0:g.length)||(i==null?void 0:i.questions.length)||0;return r("div",{className:"w-full max-w-3xl mx-auto px-4 sm:px-6",children:[r(y,{className:"glass rounded-2xl p-6 sm:p-8 mb-8 bg-opacity-80 text-center shadow-lg",children:[e("div",{className:"flex justify-center mb-6",children:e(de,{className:"h-14 w-14 text-yellow-400"})}),e("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-3",children:"Final Results"}),r("p",{className:"text-gray-300 text-lg",children:[i==null?void 0:i.title," • ",Q," questions"]})]}),r(y,{delay:200,className:"flex flex-col sm:flex-row justify-center gap-4",children:[e(E,{onClick:_,className:"w-full sm:w-auto bg-gray-700 hover:bg-gray-800 text-white px-6 py-3 rounded-full text-lg transition-all",children:"End Game"}),e(ut,{players:o.players,quizTitle:(i==null?void 0:i.title)||"IT Quiz",asButton:!0,buttonText:"Download Scores",className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-full text-lg transition-all"})]})]})};return!i||!o?e("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e("div",{className:"glass rounded-2xl p-6 bg-opacity-80 animate-pulse",children:e("p",{className:"text-lg text-white",children:"Loading quiz..."})})}):e("div",{className:"min-h-screen bg-gray-900 py-8 sm:py-12",children:r("div",{className:"container mx-auto px-4 sm:px-6",children:[r(y,{className:"text-center mb-10 sm:mb-12",children:[e("h1",{className:"text-3xl sm:text-4xl font-bold text-white mb-2",children:(i==null?void 0:i.title)||"IT Quiz"}),a===0&&e("p",{className:"text-gray-400 text-lg",children:"Waiting for teams to join"})]}),P()]})})},Nt=()=>{const{gameId:n}=pe(),s=$(),{toast:t}=V(),[a,l]=h.useState(0),[i,m]=h.useState(null),[o,S]=h.useState(null),[u,d]=h.useState(null),[c,p]=h.useState(null),[b,f]=h.useState(null),[w,C]=h.useState(null),[N,_]=h.useState(null),[P,A]=h.useState(null),[ue,K]=h.useState(0),[me,Q]=h.useState(!1);h.useEffect(()=>{if(!n){s("/");return}const k=sessionStorage.getItem("currentPlayer");if(!k){s("/");return}try{const x=JSON.parse(k);if(x.gameId!==n){s("/");return}C(x);const v=O(n);if(!v){t({title:"Game not found",description:"The game you're trying to join doesn't exist anymore",variant:"destructive"}),s("/");return}m(v);const M=D(v.quizId);if(!M){t({title:"Quiz data error",description:"Could not load the quiz data",variant:"destructive"}),s("/");return}if(S(M),v.status==="waiting")l(0);else if(v.status==="active"){const ne=v.players.find(Z=>Z.id===x.playerId);ne?ne.answers.some(Ne=>Ne.questionIndex===v.currentQuestionIndex)?l(2):(v.selectedQuestions&&v.selectedQuestions.length>0?d(v.selectedQuestions[v.currentQuestionIndex]):d(M.questions[v.currentQuestionIndex]),l(1),f(Date.now())):s("/")}else v.status==="finished"&&l(4)}catch(x){console.error("Error loading player session:",x),s("/")}},[n,s,t]),h.useEffect(()=>{if(!n||!w)return;const k=window.setInterval(()=>{const x=O(n);if(!x){clearInterval(k),t({title:"Game ended",description:"The host has ended the game session"}),sessionStorage.removeItem("currentPlayer"),s("/");return}m(x),x.status==="active"&&a===0?(x.selectedQuestions&&x.selectedQuestions.length>0?d(x.selectedQuestions[x.currentQuestionIndex]):o&&d(o.questions[x.currentQuestionIndex]),l(1),f(Date.now()),p(null)):x.status==="active"&&(i==null?void 0:i.currentQuestionIndex)!==x.currentQuestionIndex?(x.selectedQuestions&&x.selectedQuestions.length>0?d(x.selectedQuestions[x.currentQuestionIndex]):o&&d(o.questions[x.currentQuestionIndex]),l(1),f(Date.now()),p(null),A(null),K(0)):x.status==="finished"&&(i==null?void 0:i.status)!=="finished"&&l(4)},300);return _(k),()=>{k&&clearInterval(k)}},[n,w,i,o,a,s,t]);const g=k=>{if(!i||!w||!u||!b)return;p(k);const x=(Date.now()-b)/1e3,v=xt(i.id,w.playerId,k,x);if(v){A(v.correct),K(v.points),l(2);const M=O(i.id);M&&m(M),new Audio(v.correct?"/correct.mp3":"/incorrect.mp3").play().catch(Z=>{console.log("Error playing sound:",Z)}),setTimeout(()=>{l(3)},1500)}else t({title:"Error submitting answer",description:"There was a problem submitting your answer",variant:"destructive"})},T=()=>{a===2?l(3):a===3&&l(2)},q=()=>{sessionStorage.removeItem("currentPlayer"),s("/")},z=()=>{switch(a){case 0:return I();case 1:return F();case 2:return W();case 3:return be();case 4:return we();default:return null}},I=()=>{if(!i||!w)return null;const k=i.players.length;return r("div",{className:"max-w-md mx-auto",children:[r(y,{className:"glass rounded-xl p-6 mb-6 text-center",children:[e("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Waiting for host to start"}),e("div",{className:"flex justify-center items-center py-8",children:e(He,{className:"h-12 w-12 text-blue-500 animate-pulse-soft"})}),r("p",{className:"text-gray-300 mb-1",children:["Teams in lobby: ",e("span",{className:"font-semibold",children:k})]})]}),r(y,{delay:100,className:"text-center",children:[r("p",{className:"text-gray-300 mb-4",children:["Playing as ",e("span",{className:"font-semibold",children:w.playerName})]}),e(E,{variant:"outline",onClick:q,children:"Leave Game"})]})]})},F=()=>u?r("div",{className:"max-w-4xl mx-auto",children:[r(y,{className:"text-center mb-6",children:[e("h2",{className:"text-2xl font-semibold mb-2 text-high-contrast",children:"Choose your answer"}),e("p",{className:"text-muted-foreground",children:"Faster answers get more points!"})]}),e(le,{question:u,onAnswer:g,playerView:!0})]}):null,W=()=>!i||!w?null:e("div",{className:"max-w-md mx-auto",children:r(y,{className:"glass rounded-xl p-8 text-center",children:[e("div",{className:"mb-6",children:P===!0?r(ie,{children:[e("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e(J,{className:"h-12 w-12 text-green-500"})}),e("h2",{className:"text-2xl font-semibold text-green-500 mb-2",children:"Correct!"})]}):P===!1?r(ie,{children:[e("div",{className:"w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e(G,{className:"h-12 w-12 text-red-500"})}),e("h2",{className:"text-2xl font-semibold text-red-500 mb-2",children:"Incorrect"}),e("p",{className:"text-xl mb-4 text-high-contrast",children:"Better luck next time!"})]}):r(ie,{children:[e("div",{className:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e(J,{className:"h-12 w-12 text-blue-500"})}),e("h2",{className:"text-2xl font-semibold mb-2 text-high-contrast",children:"Answer received!"})]})}),e("p",{className:"text-muted-foreground mb-4",children:"Waiting for next question..."}),r("div",{className:"mt-4 flex justify-center items-center py-2",children:[e("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-pulse-soft mx-1"}),e("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-pulse-soft mx-1",style:{animationDelay:"0.2s"}}),e("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-pulse-soft mx-1",style:{animationDelay:"0.4s"}})]}),e(E,{variant:"outline",onClick:T,className:"mt-6",size:"sm",children:"Next"})]})}),be=()=>{if(!i||!w)return null;const k=O(i.id)||i;return[...k.players].sort((x,v)=>v.totalPoints-x.totalPoints).findIndex(x=>x.id===w.playerId)+1,k.players.find(x=>x.id===w.playerId),e("div",{className:"max-w-md mx-auto",children:r(y,{className:"glass rounded-xl p-8 text-center mb-6",children:[r("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e(Me,{className:"text-quiz-yellow"}),e("h3",{className:"text-xl font-semibold text-high-contrast",children:"Waiting for the Host to display the next question."})]}),e(E,{variant:"outline",onClick:T,className:"mt-6",size:"sm",children:"Go Back"})]})})},we=()=>{if(!i||!w)return null;const k=i.players.find(v=>v.id===w.playerId);return k?([...i.players].sort((v,M)=>M.totalPoints-v.totalPoints).findIndex(v=>v.id===k.id)+1,r("div",{className:"max-w-md mx-auto",children:[r(y,{className:"glass rounded-xl p-8 text-center mb-6",children:[e("div",{className:"mb-4",children:e(de,{className:"h-16 w-16 mx-auto mb-4 text-quiz-yellow"})}),e("h2",{className:"text-3xl font-bold mb-4 text-high-contrast",children:"Thankyou for Joining!"})]}),e(y,{delay:100,className:"text-center",children:e(E,{onClick:q,size:"lg",children:"Play Again"})})]})):null};return e("div",{className:"min-h-screen bg-background py-12",children:r("div",{className:"container mx-auto px-4",children:[e(y,{className:"text-center mb-8",children:e("h1",{className:"text-3xl font-bold mb-2 text-high-contrast",children:(o==null?void 0:o.title)||"Quiz Game"})}),z()]})})},vt=()=>{const n=$(),{toast:s}=V(),[t,a]=h.useState(""),[l,i]=h.useState(!1),[m,o]=h.useState(!0);return h.useEffect(()=>{const u="ITQUIZ";let d=O(u);if(!d){const c="itquiz123";if(D(c)){const b=se(c);b.id=u;const f=JSON.parse(localStorage.getItem("kahoot_clone_sessions")||"[]");f.push(b),localStorage.setItem("kahoot_clone_sessions",JSON.stringify(f)),d=b,o(!0)}else o(!1),s({title:"Quiz data error",description:"The IT Quiz data couldn't be loaded",variant:"destructive"})}d&&ye(u)},[s]),e("div",{className:"min-h-screen animated-bg flex items-center justify-center bg-slate-800",children:e("div",{className:"w-full max-w-md px-4",children:r(y,{animation:"scale-in",className:"glass rounded-xl p-8 shadow-lg",children:[r("div",{className:"text-center mb-8",children:[e("h1",{className:"text-3xl font-bold mb-2 text-white",children:"IT Quiz Participant"}),e("p",{className:"text-gray-300",children:"Enter your team name to join"})]}),r("div",{className:"space-y-6",children:[r("div",{children:[e("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Team Name"}),e("input",{type:"text",id:"playerName",value:t,onChange:u=>a(u.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-black",placeholder:"Enter your team name",maxLength:20})]}),e(E,{onClick:()=>{if(!t.trim()){s({title:"Missing team name",description:"Please enter your team name to join",variant:"destructive"});return}i(!0);try{const u="ITQUIZ";let d=O(u);if(!d){const p="itquiz123";if(!D(p)){s({title:"Quiz data error",description:"The IT Quiz data couldn't be loaded",variant:"destructive"}),i(!1);return}d=se(p),d.id=u;const f=JSON.parse(localStorage.getItem("kahoot_clone_sessions")||"[]"),w=f.findIndex(C=>C.id===(d==null?void 0:d.id));w!==-1?f[w]=d:f.push(d),localStorage.setItem("kahoot_clone_sessions",JSON.stringify(f))}if(d.status!=="waiting"){d.status="waiting",d.currentQuestionIndex=-1;const p=JSON.parse(localStorage.getItem("kahoot_clone_sessions")||"[]"),b=p.findIndex(f=>f.id===d.id);b!==-1&&(p[b]=d,localStorage.setItem("kahoot_clone_sessions",JSON.stringify(p)))}const c=ft(u,t);if(!c){s({title:"Couldn't join game",description:"An error occurred while joining the game",variant:"destructive"}),i(!1);return}sessionStorage.setItem("currentPlayer",JSON.stringify({gameId:u,playerId:c.id,playerName:t})),s({title:"Joined successfully",description:"You've joined the game. Waiting for host to start."}),n(`/ITQuiz/play/${u}`)}catch(u){console.error("Error joining game:",u),s({title:"Error joining game",description:"An unexpected error occurred",variant:"destructive"}),i(!1)}},disabled:l||!m,fullWidth:!0,size:"lg",className:"mt-4",children:l?"Joining...":"Join Game"})]})]})})})},It=()=>{const n=$(),{toast:s}=V(),[t,a]=h.useState(null),[l,i]=h.useState(null);h.useEffect(()=>{const u="ITQUIZ";let d=O(u);const c="itquiz123";if(!D(c)){s({title:"Quiz data error",description:"The IT Quiz data couldn't be loaded",variant:"destructive"});return}if(!d){d=se(c),d.id=u;const b=JSON.parse(localStorage.getItem("kahoot_clone_sessions")||"[]"),f=b.findIndex(w=>w.id===(d==null?void 0:d.id));f!==-1?b[f]=d:b.push(d),localStorage.setItem("kahoot_clone_sessions",JSON.stringify(b))}return a(d),sessionStorage.setItem("hostSession",JSON.stringify({gameId:d.id,quizId:d.quizId})),()=>{l&&clearInterval(l)}},[s]),h.useEffect(()=>{if(t){const u=window.setInterval(()=>{const d=O(t.id);d&&a(d)},1e3);return i(u),()=>{clearInterval(u)}}},[t]);const m=()=>{if(!t){s({title:"Session not available",description:"Cannot start the quiz. Session is not available.",variant:"destructive"});return}if(t.players.length===0){s({title:"No participants",description:"Wait for participants to join before starting the quiz",variant:"destructive"});return}n(`ITQuiz/host/${t.quizId}`)},o=()=>{if(!t)return;ye(t.id);const u=O(t.id);u&&(a(u),s({title:"Teams cleared",description:"All teams have been removed from the lobby"}))},S=u=>{if(!t)return;const d=t.players.filter(f=>f.id!==u),c={...t,players:d},p=JSON.parse(localStorage.getItem("kahoot_clone_sessions")||"[]"),b=p.findIndex(f=>f.id===t.id);b!==-1&&(p[b]=c,localStorage.setItem("kahoot_clone_sessions",JSON.stringify(p)),a(c),s({title:"Team removed",description:"The team has been removed from the lobby"}))};return e("div",{className:"min-h-screen animated-bg py-12 bg-slate-800",children:r("div",{className:"container mx-auto px-4",children:[r(y,{className:"text-center mb-8",children:[e("h1",{className:"text-3xl font-bold mb-2 text-white",children:"IT Quiz Host Control"}),e("p",{className:"text-gray-300",children:"Monitor participants and start the quiz when ready"})]}),r("div",{className:"max-w-2xl mx-auto",children:[r(y,{delay:100,className:"glass rounded-xl p-6 mb-6",children:[r("div",{className:"flex justify-between items-center mb-4",children:[r("div",{className:"flex items-center gap-2",children:[e(ge,{className:"text-blue-400"}),r("h2",{className:"text-xl font-semibold text-white",children:["Teams (",(t==null?void 0:t.players.length)||0,")"]})]}),r("div",{className:"flex gap-2",children:[e(oe,{variant:"outline",onClick:o,disabled:!t||t.players.length===0,children:"Clear All"}),e(oe,{onClick:m,disabled:!t||t.players.length===0,children:"Start Quiz"})]})]}),!t||t.players.length===0?e("div",{className:"text-center py-10",children:e("p",{className:"text-gray-300",children:"Waiting for teams to join..."})}):e("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.players.map((u,d)=>r(y,{delay:150+d*50,className:"bg-secondary p-3 rounded-lg text-center relative",children:[e("button",{onClick:()=>S(u.id),className:"absolute top-1 right-1 w-5 h-5 flex items-center justify-center rounded-full bg-red-500/20 hover:bg-red-500/50 transition-colors",children:e(G,{className:"w-3 h-3 text-white"})}),e("span",{className:"font-medium text-white",children:u.name})]},u.id))})]}),e(y,{delay:200,className:"flex justify-center",children:e(oe,{variant:"outline",onClick:()=>n("/"),children:"Back to Home"})})]})]})})},St=new Le,At=()=>e(Ae,{client:St,children:r(rt,{children:[e(it,{}),e(ot,{}),r(Ie,{children:[e(U,{path:"/",element:e(lt,{})}),e(U,{path:"/host/:quizId",element:e(wt,{})}),e(U,{path:"/play/:gameId",element:e(Nt,{})}),e(U,{path:"/itquizparticipant",element:e(vt,{})}),e(U,{path:"/itquizhost",element:e(It,{})}),e(U,{path:"*",element:e(ct,{})})]})]})});export{At as default};
